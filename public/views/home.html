<div id="home_root">


    <!-- FILTER AREA DESKTOP -->
    <div ng-if="wWidth > 767" id="filter_bar_desktop">

        <div id="bar_top">
            <div class="bar_text">
                Show me topics about
            </div>
            <div cos-dropdown class="bar_select">

                <div class="select_text">
                    {{filters.categories.value}}
                    <div class="icon_holder">
                        <div class="table_cell">
                            <div class="sprite sprite-dropdown-arrowdown-big2x"></div>
                        </div>
                    </div>
                </div>

                <div class="animated_bg_bar">
                </div>

                <div class="dropdown big_drop">
                    <div class="line lightest_line"></div>

                    <div class="dropdown_item" ng-repeat="category in filters.categories.options" ng-click="doSetFilter(filters.categories, category)"
                         ng-class="category === filters.categories.value ? 'bold' : ''">
                        <div class="item_name">
                            {{category}}
                        </div>
                        <!--div class="item_props">
                            404 topics
                        </div-->
                        <div class="clearer"></div>
                    </div>

                </div>
            </div>
        </div>


        <div id="bar_bottom">

            <!-- TODO: Implement orderBy -->
            <!--div cos-dropdown class="bar_section">
                <div class="bar_text">
                    Order by
                </div>
                <div class="bar_select">
                    time
                    <div class="icon_holder">
                        <div class="table_cell">
                            <div class="sprite sprite-dropdown-arrowdown-small2x"></div>
                        </div>
                    </div>
                </div>

                <div class="dropdown">
                    <div class="line lightest_line"></div>

                    <div class="dropdown_item" ng-repeat=ng-class="key == 0 ? 'bold' : ''" ng-repeat="(key, n) in ['time','popularity','size']">
                        <div class="item_name">
                            {{n}}
                        </div>
                        <div class="clearer"></div>
                    </div>
                </div>

            </div-->

            <div cos-dropdown class="bar_section">
                <div class="bar_text">
                    Show
                </div>
                <div class="bar_select">
                    {{filters.statuses.value}}
                    <div class="icon_holder">
                        <div class="table_cell">
                            <div class="sprite sprite-dropdown-arrowdown-small2x"></div>
                        </div>
                    </div>
                </div>

                <div class="dropdown">
                    <div class="line lightest_line"></div>

                    <div class="dropdown_item" ng-repeat="status in filters.statuses.options" ng-click="doSetFilter(filters.statuses, status)"
                         ng-class="status === filters.statuses.value ? 'bold' : ''">
                        <div class="item_name">
                            {{status}}
                        </div>
                        <div class="clearer"></div>
                    </div>
                </div>

            </div>

            <span ng-if="filters.categories.value !== FILTERS_ALL || filters.statuses.value !== FILTERS_ALL">
                <div class="line_holder">
                    <div class="v_line dark_gray_background">
                    </div>
                </div>


                <div class="blue_link" ng-click="doClearFilters()">
                    Clear filters
                </div>
            </span>

        </div>
    </div>


    <!-- FILTER AREA MOBILE -->
    <div ng-if="wWidth <= 767" id="filter_bar_mobile">

        <div id="open_fi" ng-if="!app.open_mobile_fi" ng-click="app.open_mobile_fi = true">
            Filter the topics
        </div>

        <div id="fi_area" ng-if="app.open_mobile_fi">

            <div id="fi_top">
                <div id="fi_header">
                    <div id="fi_header_text">
                        Filter the topics
                    </div>
                    <div id="close_fi" ng-click="app.open_mobile_fi = false">
                        <div class="table_cell">
                            <div class="sprite sprite-btn-popup-close2x"></div>
                        </div>
                    </div>
                </div>
                <div id="fi_nav">

                    <div class="fi_nav_button" ng-click="filters.tabSelected = 'categories'">
                        <div class="fi_button_text" ng-class="filters.tabSelected === 'categories' ? 'selected' : ''">CATEGORY</div>
                        <div class="line blue_background" ng-class="filters.tabSelected === 'categories' ? 'selected' :  ''"></div>
                    </div>

                    <!--div class="fi_nav_button" ng-click="app.filterTabOrder = true">
                        <div class="fi_button_text">ORDER</div>
                        <div class="line blue_background"></div>
                    </div-->

                    <div class="fi_nav_button">
                        <div class="fi_button_text" ng-class="filters.tabSelected === 'statuses' ? 'selected' : ''" ng-click="filters.tabSelected = 'statuses'">STATUS</div>
                        <div class="line blue_background" ng-class="filters.tabSelected === 'statuses' ? 'selected' : ''"></div>
                    </div>

                </div>
                <div class="clearer"></div>
            </div>

            <div class="line lightest_line"></div>

            <div id="fi_selection_area">
                <a href="" class="fi_link" ng-repeat="option in filters[filters.tabSelected].options" ng-click="doSetFilter(filters[filters.tabSelected], option)"
                   ng-class="option === filters[filters.tabSelected].value ? 'bold' : ''">
                    {{option}}
                </a>
            </div>

            <div class="fi_submit">
                <div class="blue_button" ng-click="app.open_mobile_fi = false">
                    Submit filter
                </div>
            </div>

        </div>

    </div>


    <!-- TOPICS AREA -->
    <div id="topics_area" ng-class="{no_tutorial_topic: !isTutorialVisible(), no_results: !topicList.length}">

        <div ng-if="!isTopicListLoading && !topicList.length" class="table">
            <div class="v_align_cell">
                <div class="title_area">
                    <h1>
                        We’re sorry, but we couldn’t find any results :(
                    </h1>
                    <h2>
                        Maybe you can get the first discussion initiated by
                    </h2>
                </div>

                <div class="button_area">

                    <div class="big_button">
                        <div class="button_cell">
                            <div class="icon_nudge">
                                <div class="sprite sprite-x2-mytopics-icon-newtopic-big2x"></div>
                            </div>
                            <div class="topic_text">Creating<br> a new topic</div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <a href="" class="big white_text blue_background topic" ng-if="isTutorialVisible()">
            <div class="topic_wrap">
                <div class="text_area">

                    <div class="top text_small">
                        A beginner’s guide to CitizenOS. TEST
                    </div>

                    <div class="main_text">
                        <div class="text_big">
                            Hi there, welcome to CitizenOS! Read this topic to find out how everything works.
                        </div>
                    </div>

                    <div class="line white_line"></div>

                    <div class="text_small" ng-if="wWidth > 667">
                        Tutorial and explanation
                    </div>

                </div>
            </div>
        </a>

        <a href="" class="topic" ng-repeat="topic in topicList" ng-class="topic.categories.indexOf(filters.categories.value) > -1 ? filters.categories.value : topic.categories[0] || 'varia'">
            <div class="topic_wrap">
                <div class="top text_small">
                    <div class="date">{{topic.createdAt | amDateFormat : 'L'}}</div>
                    <div class="author">{{topic.creator.name}}</div>
                    <div class="clearer"></div>
                </div>

                <div class="main_text">
                    <div class="text_big" ng-bind-html="topic.title">
                        Open Governance Workshop: Public decision-making in 2025
                    </div>
                    <div class="text_small" ng-if="wWidth > 667" ng-bind-html="topic.description">
                        Discussions, lectures and a mini-hackathon to change experiences and ideas, to get inspired and boost ope…
                    </div>
                </div>

                <div class="line"></div>

                <div class="text_small" ng-if="wWidth > 667">
                    <!-- FIXME: translate! -->
                    <span ng-repeat="category in topic.categories">
                        {{category}}<span ng-show="!$last">, </span>
                    </span>
                </div>
            </div>
        </a>

        <a href="" ng-click="loadTopicList()" ng-if="topicCountTotal > topicList.length" class="topic varia">
            <div class="topic_wrap">
                <div class="main_text">
                    <div class="text_big">
                        Load more...
                    </div>
                </div>
            </div>
        </a>

        <div class="clearer"></div>

    </div>
</div>
