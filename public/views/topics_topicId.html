<div id="topics_admin_root">

    <div class="timeline">

        <div class="milestones_wrap">

            <div class="milestones_section">
                <div class="table_cell milestones_checkmark">
                    <div class="sprite sprite-check-timeline-gray2x">
                    </div>
                </div>
                <div class="table_cell">
                    <div class="bold" translate="VIEWS.TOPICS_TOPICID.BAR_MILESTONES" tranlsate-values="{count: (topic.status==STATUSES.voting ? 1 :  topic.status==STATUSES.followUp ? 2: 0)}"> 0
                        MILESTONES
                    </div>
                </div>
            </div>

        </div>

        <div class="table_cell">
            <div class="background_line timeline_gray_background">
            </div>

            <div ng-if="[STATUSES.closed, STATUSES.followUp].indexOf(topic.status) > -1" class="progress_line bar_blue"
                 ng-style="STATUSES.followUp === topic.status && {'width':'75%'} || {'width': '100%'}">
            </div>

            <div ng-if="[STATUSES.closed, STATUSES.followUp, STATUSES.voting].indexOf(topic.status) > -1" class="progress_line bar_green"
                 ng-style="STATUSES.voting === topic.status && {'width':'50%'} || {'width': '66%'}">
            </div>

            <div ng-if="[STATUSES.closed, STATUSES.followUp, STATUSES.voting, STATUSES.inProgress].indexOf(topic.status) > -1" class="progress_line favorite_yellow_background"
                 ng-style="STATUSES.inProgress === topic.status && {'width':'25%'} || {'width': '33%'}">
            </div>

            <div class="days_left_wrap"
                 ng-class="{favorite_yellow_background: topic.status === STATUSES.inProgress, bar_green: topic.status === STATUSES.voting, bar_blue: topic.status === STATUSES.followUp,timeline_gray_background: topic.status === STATUSES.closed }"
                 ng-style="topic.status === STATUSES.inProgress && {'left':'25%'}  || topic.status === STATUSES.voting && {'left':'50%'} || topic.status === STATUSES.followUp && {'left': '75%'} || topic.status === STATUSES.closed && {'left': '99%'}">
                <div class="table_cell">
                    {{'TXT_TOPIC_STATUS_' + topic.status | uppercase | translate}}
                </div>
            </div>

            <div class="checkmark">
                <div class="table_cell">
                    <div class="sprite sprite-check-timeline-yellow-start2x">
                    </div>
                </div>
            </div>

            <div ng-if="[STATUSES.closed, STATUSES.followUp, STATUSES.voting].indexOf(topic.status) > -1" class="checkmark" ng-style="{'left': '32%'}">
                <div class="table_cell">
                    <div class="sprite sprite-check-timeline-yellow2x">
                    </div>
                </div>
                <div class="tooltip">
                    <span translate="VIEWS.TOPICS_TOPICID.BAR_TOOLTIP_PHASE">Phase:</span> <span class="bold" translate="VIEWS.TOPICS_TOPICID.BAR_TOOLTIP_IN_PROGRESS">In progress</span>
                </div>
            </div>

            <div ng-if="[STATUSES.closed, STATUSES.followUp].indexOf(topic.status) > -1" class="checkmark" ng-style="{'left': '65%'}">
                <div class="table_cell">
                    <div class="sprite sprite-check-timeline-green2x">
                    </div>
                </div>
                <div class="tooltip">
                    <span translate="VIEWS.TOPICS_TOPICID.BAR_TOOLTIP_PHASE">Phase:</span> <span class="bold" translate="VIEWS.TOPICS_TOPICID.BAR_TOOLTIP_VOTING">Voting</span>
                </div>
            </div>

        </div>

        <div class="additional_info signing_deadline" ng-if="topic.vote.endsAt">
            <span translate="VIEWS.TOPICS_TOPICID.BAR_SIGNING_DEADLINE">Signing deadline</span>: <span class="bold">{{topic.vote.endsAt | amDateFormat:'L'}}</span>
        </div>


        <div class="additional_info current_phase">
            <span translate="VIEWS.TOPICS_TOPICID.BAR_CURRENT_PHASE">Current phase:</span> {{'TXT_TOPIC_STATUS_' + topic.status | uppercase | translate}}
        </div>
    </div>

    <div class="content_wrap">

        <div class="tabs_wrap_wrap">

            <div class="tabs_wrap">
                <div class="tabs_visible_area" ng-controller="buttonsSlider">
                    <div ng-if="trainPosition != 0 && tabsTrainWidth > tabsVisibleAreaWidth && wWidth > 1024" class="arrow_btn" ng-click="moveLeft()">
                        <div class="table_cell">
                            <div class="sprite sprite-icon-arrow-topic-tab2x"></div>
                        </div>
                    </div>
                    <div ng-if="trainPosition >= -tabsTrainWidth+tabsVisibleAreaWidth && wWidth > 1024" class="arrow_btn right" ng-click="moveRight()">
                        <div class="table_cell">
                            <div class="sprite sprite-icon-arrow-right-topic-tab2x"></div>
                        </div>
                    </div>
                    <div class="tabs_rails">
                        <div class="tabs_train" slide-controller identifier="tabsTrain" start_slide_at="1024" ng-style="{'margin-left' : trainPosition + 'px'}">
                            <div class="tab" ui-sref="topics.view({topicId: topic.id})" ui-sref-opts="{reload: true}" ng-class="{selected: ('topics.view' | isState)}"
                                 ng-style="{'width' : tabFinalLength + 'px'}" dimensions>
                                <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.TAB_VIEW">View</div>
                            </div>
                            <div ng-if="topic.voteId || topic.vote && topic.vote.id" class="tab" ui-sref="topics.view.votes.view({topicId: topic.id, voteId:topic.voteId})"
                                 ui-sref-opts="{reload: true}" ng-class="{selected: ('topics.view.votes.view' | isState)}" ng-style="{'width' : tabFinalLength + 'px'}" dimensions>
                                <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.TAB_VOTE">Vote</div>
                            </div>
                            <div ng-if="[STATUSES.closed, STATUSES.followUp].indexOf(topic.status) > -1" class="tab" ui-sref="topics.view.followUp({topicId: topic.id})"
                                 ui-sref-opts="{reload: true}" ng-class="{selected: ('topics.view.followUp' | isState)}" ng-style="{'width' : tabFinalLength + 'px'}" dimensions>
                                <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.TAB_FOLLOW_UP">Follow up</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="fake_cell"></div>

            <div class="line lightest_line"></div>


        </div>

        <div class="content">

            <div class="main_panel">

                <div class="info_bar_wrap" ng-if="app.editMode && showInfoEdit && topic.canEdit() && (topic.status === STATUSES.inProgress)">
                    <div class="info_bar bar_blue">
                        <div class="info_icon">
                            <div class="sprite sprite-icon-notification-info2x"></div>
                        </div>

                        <div class="info_bar_text">
                            <div class="info_row">
                                <span translate="VIEWS.TOPICS_TOPICID.TAB_INFO_TXT_EDIT">You are now in edit mode. You can add text or make changes to it</span>
                            </div>
                        </div>

                        <div class="info_icon" ng-click="hideInfoEdit()">
                            <div class="sprite sprite-icon-closemenu2x"></div>
                        </div>
                    </div>
                </div>

                <div class="info_bar_wrap" ng-if="topic.canEdit() && (topic.status === STATUSES.voting) && !('topics.view.votes' | includedByState)">
                    <div class="info_bar bar_green">
                        <div class="info_icon">
                            <div class="sprite sprite-icon-notification-check2x"></div>
                        </div>

                        <div class="info_bar_text">
                            <div class="info_row">
                                <span translate="VIEWS.TOPICS_TOPICID.TAB_INFO_TXT_VOTE">This topic is being voted on, editing is no longer possible!</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="main_content_wrap">

                    <!-- Topic summary -->

                    <div class="voting_platform_wrap topic_summary_wrap" ng-if="('topics.view.followUp' | isState)">

                        <div class="vote_casting_header">
                            <div class="vote_casting_header_section">
                                <div class="table_cell bold" translate="VIEWS.TOPICS_TOPICID.TOPIC_SUMMARY_HEADER">
                                    Topic summary
                                </div>
                            </div>
                            <div class="clearer"></div>
                        </div>

                        <div class="line lightest_line"></div>

                        <div class="topic_summary_content">

                            <div class="content_item topic_summary_title">
                                <div class="item_description" translate="VIEWS.TOPICS_TOPICID.TOPIC_SUMMARY_TITLE">
                                    Title
                                </div>
                                <div class="item_content">
                                    <div class="item_text">
                                        {{topic.title}}
                                    </div>
                                </div>
                                <div class="clearer"></div>
                            </div>

                            <div class="content_item topic_summary_date">
                                <div class="item_description" translate="VIEWS.TOPICS_TOPICID.TOPIC_SUMMARY_FINALIZED_ON">
                                    Document finalised on
                                </div>
                                <div class="item_content">
                                    <div class="item_text">
                                        {{topic.vote.createdAt | amDateFormat:'L'}}
                                        <span class="separator">|</span>
                                        <span class="item_link blue_link" ui-sref="topics.view({topicId: topic.id})" translate="VIEWS.TOPICS_TOPICID.TOPIC_SUMMARY_VIEW_FINAL_DOCUMENT">
                                            view final document
                                        </span>
                                    </div>
                                </div>
                                <div class="clearer"></div>
                            </div>

                            <div class="content_item topic_summary_date" ng-if="topic.vote.endsAt">
                                <div class="item_description" translate="VIEWS.TOPICS_TOPICID.TOPIC_SUMMARY_VIEW_VOTING_ENDED_ON">
                                    Voting ended on
                                </div>
                                <div class="item_content">
                                    <div class="item_text">
                                        {{topic.vote.endsAt | amDateFormat:'L'}}
                                        <span class="separator">|</span>
                                        <span class="item_link blue_link" ui-sref="topics.view.votes.view({topicId: topic.id, voteId:topic.voteId})"
                                              translate="VIEWS.TOPICS_TOPICID.TOPIC_SUMMARY_VIEW_VOTE_RESULTS">
                                            view vote results
                                        </span>
                                    </div>
                                </div>
                                <div class="clearer"></div>
                            </div>

                            <div class="clearer"></div>

                        </div>
                    </div>

                    <!-- Create a milestone -->

                    <div class="voting_platform_wrap create_a_milestone_wrap" ng-if="('topics.view.followUp' | isState) && topic.canEdit()">

                        <div class="vote_casting_header">
                            <div class="vote_casting_header_section">
                                <div class="table_cell bold" translate="VIEWS.TOPICS_TOPICID.ADD_MILESTONES_CREATE_A_MILESTONE">
                                    Create a milestone
                                </div>
                            </div>
                            <div class="clearer"></div>
                        </div>

                        <div class="line lightest_line"></div>

                        <div class="create_a_milestone_content">
                            <div class="voting_platform_section">

                                <input id="create_milestone_title" ng-model="eventForm.subject" ng-class="{'error_input': eventForm.errors.subject}" translate
                                       translate-attr-placeholder="VIEWS.TOPICS_TOPICID.ADD_MILESTONES_PLACEHOLDER_SUBJECT" class="gray_borders" maxlength="{{maxLengthSubject}}" required>
                                <label for="create_milestone_title" class="error_label" ng-if="eventForm.errors.subject">
                                    <div class="table_cell">
                                        <div class="sprite sprite-icon-inputfield-error2x"></div>
                                        <span translate="{{eventForm.errors.subject}}">Subject error</span>
                                    </div>
                                </label>

                                <textarea id="create_milestone_textarea" class="gray_borders" ng-class="{'error_input': eventForm.errors.text}" ng-model="eventForm.text" translate
                                          translate-attr-placeholder="VIEWS.TOPICS_TOPICID.ADD_MILESTONES_PLACEHOLDER_TEXT" maxlength="{{maxLengthText}}" required></textarea>

                                <label for="create_milestone_textarea" class="error_label" ng-if="eventForm.errors.text">
                                    <div class="table_cell">
                                        <div class="sprite sprite-icon-inputfield-error2x"></div>
                                        <span translate="{{eventForm.errors.text}}">Text error</span>
                                    </div>
                                </label>

                                <div class="blue_button">
                                    <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.ADD_MILESTONES_ADD_MILESTONE" ng-click="submitEvent()">
                                        ADD MILESTONE
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>


                    <div class="milestones_in_descriptions_wrap" ng-if="('topics.view.followUp' | isState)">
                        <div class="milestone_description" ng-repeat="(key, event) in topicEvents">
                            <div class="milestone_description_header">
                                <div class="table_cell">
                                    <div class="sprite sprite-check-timeline-blue2x"></div>
                                </div>
                                <div class="table_cell">
                                    <div class="milestone_number" translate="VIEWS.TOPICS_TOPICID.ADD_MILESTONES_MILESTONE" translate-values="{number: topicEvents.length - $index}">2ND MILESTONE</div>
                                </div>
                                <div class="table_cell">
                                    <div class="v_line"></div>
                                </div>
                                <div class="table_cell">
                                    <div class="milestone_date">
                                        {{event.createdAt | amDateFormat: 'LLL'}}
                                    </div>
                                </div>
                                <div class="table_cell" ng-if="topic.canEdit()">
                                    <div class="v_line"></div>
                                </div>
                                <div class="table_cell" ng-if="topic.canEdit()">
                                    <div class="milestone_action">
                                        <span class="red_text blue_link" translate="VIEWS.TOPICS_TOPICID.ADD_MILESTONE_DELETE" ng-click="deleteEvent(event)">delete</span>
                                    </div>
                                </div>
                            </div>
                            <div class="milestone_description_content">
                                <div class="milestone_description_title" ng-bind-html="event.subject">
                                    This is what we will do in our second step of our 5-year plan
                                </div>
                                <div class="milestone_description_text" ng-bind-html="event.text | linky">
                                    Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an
                                    unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic
                                    typesetting, remaining essentially unchanged.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cast your vote container-->

                    <div class="voting_platform_wrap vote_casting_wrap" ng-if="topic.vote.id && showVoteArea">

                        <div class="vote_casting_header">
                            <div class="vote_casting_header_section">
                                <div class="table_cell bold vote_casting_description" translate="VIEWS.TOPICS_TOPICID.VOTE_CAST_YOUR_VOTE">Cast your vote</div>
                            </div>
                            <div class="vote_casting_header_section">
                                <div class="table_cell">
                                    <span class="bold">{{topic.vote.getVoteCountTotal()}}</span>/{{topic.members.users.count}} <span
                                    translate="VIEWS.TOPICS_TOPICID.VOTE_VOTES_COUNTED"> votes counted</span>
                                </div>
                            </div>
                            <div class="clearer"></div>
                        </div>

                        <div class="line lightest_line"></div>

                        <div class="vote_casting_message with_upper_right_links" ng-if="topic.vote.authType === voteAuthTypes.hard && !topic.hasVoteEnded()">

                            <div class="message_header">
                                <div class="message_title" translate="VIEWS.TOPICS_TOPICID.VOTE_HEADING_REQUIRE_HARD_ID">This vote requires an ID card or Mobile ID signing.</div>
                                <div class="float_wrap">
                                    <div class="sprite sprite-id-kaart-small2x"></div>
                                    <div class="sprite sprite-mobiil-id-small2x"></div>
                                    <div class="clearer"></div>
                                </div>
                                <div class="clearer"></div>
                            </div>

                            <div class="message_content" translate="VIEWS.TOPICS_TOPICID.VOTE_TXT_REQUIRE_HARD_ID">This document needs a signing by ID card or Mobile ID to be registered. You can not
                                vote if you don’t identify yourself.
                            </div>

                        </div>

                        <div class="vote_casting_message with_upper_right_links" ng-if="getUserHasVoted() && !topic.hasVoteEnded()">

                            <div class="message_header">
                                <div class="message_title" translate="VIEWS.TOPICS_TOPICID.HEADING_VOTE_REGISTERED">Your vote has been registered!</div>
                                <div class="float_wrap">
                                    <div class="blue_link" ng-show="topic.vote.authType === voteAuthTypes.hard"><a ng-href="{{topic.vote.downloads.bdocVote}}"
                                                                                                                   translate="VIEWS.TOPICS_TOPICID.BTN_DOWNLOAD_USER_BDOC">Download your DDOC</a></div>
                                </div>
                                <div class="clearer"></div>
                            </div>

                            <div class="message_content" ng-show="topic.vote.authType === voteAuthTypes.hard" translate="VIEWS.TOPICS_TOPICID.VOTE_TXT_VOTE_REGISTERED">This document needs a signing by
                                ID card or Mobile ID to be registered. You can not vote if you don’t identify yourself.
                            </div>

                        </div>


                        <div class="voting_platform_buttons" ng-if="!topic.hasVoteEnded()">

                            <div class="voting_button" cos-disabled="!topic.canVote()" ng-class="(option.selected) ? 'active' : ''" ng-repeat="(key, option) in topic.vote.options.rows"
                                 ng-click="doVote(option)">
                                <div class="table_cell left_side">
                                    {{getOptionLetter(key)}}.
                                </div>
                                <div class="table_cell right_side" translate="{{'VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_' + option.value | linky | uppercase}}"
                                     translate-default="{{option.value | linky}}"></div>
                            </div>

                        </div>

                        <div class="delegation_section" ng-if="!topic.hasVoteEnded()">

                            <div class="voting_button voting_button_blue" cos-disabled="(!topic.canDelegate() || topic.vote.authType === voteAuthTypes.hard)"
                                 ng-class="topic.vote.delegation ? 'active' : ''" ng-click="doDelegate()">
                                <div class="table_cell left_side">
                                    <div class="sprite sprite-icon-delegate2x"></div>
                                </div>
                                <div class="table_cell right_side" translate="VIEWS.TOPICS_TOPICID.VOTE_HEADING_DELEGATE">Delegate your vote</div>
                            </div>

                            <div class="delegation_information" ng-if="topic.vote.delegation">
                                <div class="delegation_title" translate="VIEWS.TOPICS_TOPICID.VOTE_DELEGATED_TO">You delegated your vote to</div>
                                <div class="delegations">

                                    <div class="table_cell">
                                        <div class="profile_image_wrapper dark">
                                            <!--div class="profile_moon sprite sprite-icon-certified-fb2x"></div-->
                                            <div class="account_picture">
                                                <img ng-src="{{topic.vote.delegation.imageUrl}}">
                                                <div class="profile_image_filler">
                                                    <div class="table_cell">
                                                        ML
                                                    </div>
                                                    <div class="profile_circle"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="name_wrap">
                                            <div class="table_cell">
                                                <div class="blue_link bold">{{topic.vote.delegation.name}}</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="table_cell">
                                        <div class="blue_button" ng-click="doRevokeDelegation()" translate="VIEWS.TOPICS_TOPICID.VOTE_REVOKE_DELEGATION">Revoke your delegation</div>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <!-- Statistics graph start -->
                        <div class="vote_casting_message" ng-if="topic.canUpdate() && topic.hasVoteEnded() && topic.vote.authType===voteAuthTypes.hard">

                            <div class="message_header">
                                <div class="message_title" translate="VIEWS.TOPICS_TOPICID.VOTE_HEADING_VOTE_CLOSED">Voting has ended!</div>
                                <div class="clearer"></div>
                            </div>

                            <div class="message_content" translate="VIEWS.TOPICS_TOPICID.VOTE_TXT_VOTE_CLOSED">Everyone has cast their votes. You can download the full document here.</div>
                            <a ng-href="{{topic.vote.downloads.bdocFinal}}" target="_blank">
                                <div class="voting_button voting_button_blue">
                                    <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.BTN_DOWNLOAD_FINAL_BDOC">Download full DDOC</div>
                                </div>
                            </a>
                        </div>

                        <!-- Regular graph -->
                        <div class="graph_wrap" ng-if="topic.vote.type === voteTypes.regular">

                            <div class="graph_row" ng-class="option.selected ? 'active' : ''" ng-repeat="(key, option) in topic.vote.options.rows">
                                <!-- TODO: Maybe there is a better solution for translation fallback in the tooltip text? -->
                                <div class="graph_row_fill" ng-style="{width: getVoteValuePercentage(option.voteCount) + '%'}" tooltips
                                     tooltip-template="{{((optionTranslation = ('VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_' + option.value | linky | uppercase | translate)) != ('VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_' + option.value | linky | uppercase)) ? optionTranslation : (option.value | linky)}}"
                                     tooltip-smart="true">
                                    <div class="graph_row_text_wrap">
                                        <div class="table_cell">
                                            <div class="graph_row_text">
                                                <span translate="{{'VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_' + option.value | linky | uppercase}}"
                                                      translate-default="{{option.value | linky}}"></span><br>
                                                <span class="bold">{{option.voteCount || 0}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Big graph -->
                        <div class="big_graph" ng-if="topic.vote.type === voteTypes.multiple">
                            <div class="long_text_holder">
                                <div class="long_text" ng-class="(option.selected) ? 'active' : ''" ng-repeat="(key, option) in topic.vote.options.rows">
                                    <span class="bold">{{getOptionLetter(key)}}.</span> <span translate="{{'VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_' + option.value | linky | uppercase}}"
                                                                                              translate-default="{{option.value | linky}}"></span>
                                </div>
                            </div>

                            <div class="graph_wrap">

                                <div class="graph_row" ng-class="option.selected ? 'active' : ''" ng-repeat="(key, option) in topic.vote.options.rows">
                                    <!-- TODO: Maybe there is a better solution for translation fallback in the tooltip text? -->
                                    <div class="graph_row_fill" ng-style="{width: getVoteValuePercentage(option.voteCount) + '%'}" tooltips
                                         tooltip-template="{{((optionTranslation = ('VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_' + option.value | linky | uppercase | translate)) != ('VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_' + option.value | linky | uppercase)) ? optionTranslation : (option.value | linky)}}"
                                         tooltip-smart="true">
                                        <div class="graph_row_text_wrap">
                                            <div class="table_cell">
                                                <div class="graph_row_text">
                                                    {{getOptionLetter(key)}}.<br>
                                                    <span class="bold">{{option.voteCount || 0}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- Statistics graph end -->

                    </div>

                    <div class="voting_platform_wrap" ng-if="showVoteCreateForm">
                        <div class="platform_description" translate="VIEWS.TOPICS_TOPICID.VOTE_HEADING_CREATE">Create a voting platform</div>
                        <div class="voting_platform_section">
                            <div class="line lightest_line"></div>
                            <div class="voting_platform_section_title" translate="VIEWS.TOPICS_TOPICID.VOTE_HEADING_STEP1">Step 1: Choose voting type</div>

                            <div class="voting_platform_buttons_wrap">

                                <div class="table_cell">
                                    <div class="voting_platform_button" ng-click="setVoteType(voteTypes.regular)" ng-class="voteForm.voteType == 'regular'? 'active' : ''">
                                        <div class="table_cell">
                                            <div class="button_title" translate="VIEWS.TOPICS_TOPICID.VOTE_BTN_TYPE_REGULAR">REGULAR</div>
                                            <div class="button_description" translate="VIEWS.TOPICS_TOPICID.VOTE_BTN_TYPE_REGULAR_EXPLANATION">(ie. yes/no/neutral/…)</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="table_cell">
                                    <div class="voting_platform_button" ng-click="setVoteType(voteTypes.multiple)" ng-class="voteForm.voteType == 'multiple' ? 'active' : ''">
                                        <div class="table_cell">
                                            <div class="button_title" translate="VIEWS.TOPICS_TOPICID.VOTE_BTN_TYPE_MULTIPLECHOICE">MULTIPLECHOICE</div>
                                            <div class="button_description" translate="VIEWS.TOPICS_TOPICID.VOTE_BTN_TYPE_MULTIPLECHOICE_EXPLANATION">(ie. A/B/C/D/…)</div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="clearer"></div>

                        </div>

                        <div class="line lightest_line"></div>

                        <div class="voting_platform_section" ng-if="voteForm.voteType">
                            <div class="voting_platform_section_title" translate="VIEWS.TOPICS_TOPICID.VOTE_HEADING_STEP2">Step 2: Define answers</div>

                            <!-- regular -->
                            <div class="define_answers_wrap" ng-if="voteForm.voteType == 'regular'">
                                <div class="table_cell">
                                    <div class="table">
                                        <div class="table_cell">
                                            <div class="gray_toggle_box">
                                                <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_YES">Yes</div>
                                                <div class="table_cell">
                                                    <div cos-disabled="true" cos-toggle ng-model="voteForm.options[0].enabled" cos-toggle-text-on="'TOGGLE_ON' | translate"
                                                         cos-toggle-text-off="'TOGGLE_OFF' | translate"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table_cell">
                                            <div class="gray_toggle_box">
                                                <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_NO">No</div>
                                                <div class="table_cell">
                                                    <div cos-disabled="true" cos-toggle ng-model="voteForm.options[1].enabled" cos-toggle-text-on="'TOGGLE_ON' | translate"
                                                         cos-toggle-text-off="'TOGGLE_OFF' | translate"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="table_cell">
                                    <div class="table">
                                        <div class="table_cell">
                                            <div class="gray_toggle_box">
                                                <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_NEUTRAL">Neutral</div>
                                                <div class="table_cell">
                                                    <div cos-toggle ng-model="voteForm.extraOptions.neutral.enabled" cos-toggle-text-on="'TOGGLE_ON' | translate"
                                                         cos-toggle-text-off="'TOGGLE_OFF' | translate"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table_cell">
                                            <div class="gray_toggle_box">
                                                <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_VETO">Veto</div>
                                                <div class="table_cell">
                                                    <div cos-toggle ng-model="voteForm.extraOptions.veto.enabled" cos-toggle-text-on="'TOGGLE_ON' | translate"
                                                         cos-toggle-text-off="'TOGGLE_OFF' | translate"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <!-- multiplechoice -->
                            <div class="double_cell_layout" ng-if="voteForm.voteType == 'multiple'">
                                <div class="left_row">

                                    <div class="input_with_icon clickable" ng-repeat="(key, option) in voteForm.options">
                                        <input class="gray_borders" ng-model="option.value" placeholder="{{'VIEWS.TOPICS_TOPICID.PLACEHOLDER_ENTER_A_POSSIBLE_ANSWER' | translate}}">
                                        <div class="icon_table">
                                            <div class="icon_cell" ng-click="removeOption(key)">
                                                <div class="sprite sprite-inputfield-icon-delete2x"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="input_with_icon clickable">
                                        <input class="gray_borders" placeholder="{{'VIEWS.TOPICS_TOPICID.PLACEHOLDER_ENTER_A_POSSIBLE_ANSWER' | translate}}">
                                        <div class="icon_table">
                                            <div class="icon_cell">
                                                <div class="sprite sprite-inputfield-icon-delete2x"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="blue_button" ng-click="addOption()" translate="VIEWS.TOPICS_TOPICID.VOTE_BTB_ADD_OPTION">Add another answer</div>
                                </div>
                                <div class="right_row add_bottom_borders">

                                    <div class="gray_toggle_box">
                                        <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_NEUTRAL">Neutral</div>
                                        <div class="table_cell">
                                            <div cos-toggle ng-model="voteForm.extraOptions.neutral.enabled" cos-toggle-text-on="'TOGGLE_ON' | translate"
                                                 cos-toggle-text-off="'TOGGLE_OFF' | translate"></div>
                                        </div>
                                    </div>

                                    <div class="gray_toggle_box">
                                        <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_VETO">Veto</div>
                                        <div class="table_cell">
                                            <div cos-toggle ng-model="voteForm.extraOptions.veto.enabled" cos-toggle-text-on="'TOGGLE_ON' | translate"
                                                 cos-toggle-text-off="'TOGGLE_OFF' | translate"></div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <div class="line lightest_line" ng-if="voteForm.voteType"></div>


                        <div class="voting_platform_section" ng-if="voteForm.voteType">
                            <div class="voting_platform_section_title" translate="VIEWS.TOPICS_TOPICID.VOTE_HEADING_STEP3">Step 3: User vote casting</div>

                            <div class="double_cell_layout ten_px_margin_between">
                                <div class="left_row add_bottom_borders">

                                    <div class="gray_toggle_box">
                                        <div class="table_cell">
                                            <div class="toggle_box_title" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_AUTH_SOFT_ID">Soft-ID</div>
                                            <div class="toggle_box_description" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_AUTH_SOFT_ID_EXPLANATION">CITIZENOS LOGIN IS REQUIRED</div>
                                        </div>
                                        <div class="table_cell">
                                            <div cos-toggle ng-value="voteAuthTypes.soft" off-value="voteAuthTypes.hard" ng-model="voteForm.authType" cos-toggle-text-on="'TOGGLE_ON' | translate"
                                                 cos-toggle-text-off="'TOGGLE_OFF' | translate"></div>
                                        </div>
                                    </div>

                                    <div class="gray_toggle_box">
                                        <div class="table_cell">
                                            <div class="toggle_box_title" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_AUTH_HARD_ID">Hard-ID</div>
                                            <div class="toggle_box_description" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_AUTH_HARD_ID_EXPLANATION">ID-CARD OR MOBILE ID SIGNING IS REQUIRED</div>
                                        </div>
                                        <div class="table_cell">
                                            <div cos-toggle ng-value="voteAuthTypes.hard" off-value="voteAuthTypes.soft" ng-model="voteForm.authType" cos-toggle-text-on="'TOGGLE_ON' | translate"
                                                 cos-toggle-text-off="'TOGGLE_OFF' | translate"></div>
                                        </div>
                                        <div class="table_row">
                                            <div class="float_wrap">
                                                <div class="sprite sprite-id-kaart-small2x"></div>
                                                <div class="sprite sprite-mobiil-id-small2x"></div>
                                                <div class="clearer"></div>
                                            </div>

                                        </div>
                                    </div>

                                </div>
                                <div class="right_row add_bottom_borders">

                                    <div class="gray_toggle_box">
                                        <div class="table_cell">
                                            <div class="toggle_box_title" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_DELEGATION">Delegation</div>
                                            <div class="toggle_box_description" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_DELEGATION_EXPLANATION">ALLOW USERS TO PASS ON THEIR VOTING RIGHT.</div>
                                        </div>
                                        <div class="table_cell">
                                            <div cos-toggle cos-disabled="(voteForm.authType == voteAuthTypes.hard)" ng-model="voteForm.delegationIsAllowed"
                                                 cos-toggle-text-on="'TOGGLE_ON' | translate" cos-toggle-text-off="'TOGGLE_OFF' | translate"></div>
                                        </div>
                                    </div>

                                    <div class="gray_toggle_box" ng-if="(voteForm.authType == voteAuthTypes.hard)">
                                        <div class="toggle_box_warning">
                                            <div class="sprite sprite-icon-inputfield-error2x"></div>
                                        <span
                                            translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_NOTICE_DELEGATION_DISABLED_FOR_HARD_ID">When Hard-ID is the chosen method of voting, delegation is not allowed.</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>


                        <div class="line lightest_line" ng-if="voteForm.voteType"></div>

                        <div class="voting_platform_section" ng-if="voteForm.voteType">
                            <div class="voting_platform_section_title" translate="VIEWS.TOPICS_TOPICID.VOTE_HEADING_STEP4">Step 4: End of voting system</div>

                            <div class="double_cell_layout ten_px_margin_between margin_betwen_boxes">

                                <div class="left_row add_bottom_borders">
                                    <div class="picker_content" ng-class="voteForm.endsAt ? 'active' : ''">

                                        <div class="bubble_content">

                                            <div class="bubble_section">

                                                <div class="gray_toggle_box">
                                                    <div class="table_cell">
                                                        <div class="toggle_box_title" translate="VIEWS.TOPICS_TOPICID.VOTE_LBL_DEADLINE">Deadline</div>
                                                    </div>
                                                    <div class="table_cell">
                                                        <div cos-toggle ng-model="voteForm.endsAt" cos-toggle-text-on="'TOGGLE_ON' | translate" cos-toggle-text-off="'TOGGLE_OFF' | translate"></div>
                                                    </div>
                                                </div>

                                                <div class="bubble_description">
                                                    <div class="picker_deadline_date">
                                                        {{voteForm.endsAt | amDateFormat:'L'}}
                                                    </div>
                                                    <div class="picker_days_left" translate="VIEWS.TOPICS_TOPICID.VOTE_TXT_DEADLINE_CALENDAR_DAYS_LEFT"
                                                         translate-values="{numberOfDaysLeft: daysToVoteEnd()}">0 days left
                                                    </div>
                                                    <div class="clearer"></div>
                                                </div>
                                            </div>

                                            <div class="date_picker_wrap" date-picker="voteForm.endsAt" min-date="datePickerMin" max-view="date" min-view="date"
                                                 template="/views/directives/date_picker.html"></div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="line lightest_line" ng-if="voteForm.voteType"></div>

                        <div class="voting_platform_section" ng-if="voteForm.voteType">

                            <div class="blue_button aqua_marine_background black_text" ng-click="createVote()">
                                <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.VOTE_BTN_CREATE_VOTE">CREATE VOTING SYSTEM</div>
                            </div>

                        </div>


                    </div>

                    <div class="iframe_content_wrap" ng-if="!('topics.view.followUp' | isState)">

                        <div class="topic_info" ng-class="app.more_info_button ? 'open' : ''">

                            <div class="container_favorite" ng-class="app.favorite ? 'favorited' : ''" ng-click="app.favorite = !app.favorite">
                                <div class="ff_table_fix">
                                    <div class="table_cell">
                                        <div class="sprite sprite-icon-favourite2x-white"></div>
                                        <div class="yellow_bg"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="more_info_button" ng-click="app.more_info_button = !app.more_info_button">
                                <div class="table_cell">
                                    <div class="circle_holder">
                                        <div class="circle_wrap">
                                            <div class="circle"></div>
                                        </div>
                                        <div class="circle_wrap">
                                            <div class="circle"></div>
                                        </div>
                                        <div class="circle_wrap">
                                            <div class="circle"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="info_sections_wrap" ng-if="wWidth > 767 || app.more_info_button">
                                <div class="info_section">
                                    <span translate="VIEWS.TOPICS_TOPICID.LBL_CATEGORIES">Categories:</span>
                                    <span ng-repeat="category in topic.categories"><span translate="{{'TXT_TOPIC_CATEGORY_' + category | uppercase}}" translate-default="{{category}}">Poliitika</span><span
                                    ng-if="!$last"> | </span></span><span ng-if="!topic.categories.length" translate="VIEWS.TOPICS_TOPICID.LBL_NO_CATEGORIES">none <span ng-if="topic.canEdit()"
                                                                                                                                                                         class="blue_link"
                                                                                                                                                                         ui-sref="topics.view.settings({topicId: topic.id, tab: 'categories'})"
                                                                                                                                                                         translate="VIEWS.TOPICS_TOPICID.LNK_ADD_CATEGORIES">add categories</span></span>
                                </div>
                                <div class="info_section"><span translate="VIEWS.TOPICS_TOPICID.LBL_AUTHORS">Authors:</span> <span ng-if="topic.creator.email" class="blue_link"
                                    tooltips tooltip-class="tooltip_author"
                                    tooltip-template="<a class='blue_link' ng-href={{topic.creator.email}}>{{topic.creator.email}}</a>"
                                    tooltip-smart="true">{{topic.creator.name}}</span><span ng-if="!topic.creator.email">{{topic.creator.name}}</span></div>
                                <div class="info_section">
                                    <span translate="VIEWS.TOPICS_TOPICID.LBL_ACTIVITY">Activity:</span> <span class="blue_link"
                                                                                                               ng-click="app.activeCommentSection = 'arguments'; app.scrollToAnchor('arguments')"
                                                                                                               translate="VIEWS.TOPICS_TOPICID.LNK_ARGUMENTS_COUNT"
                                                                                                               translate-values="{count: topicComments.rows.length}">0 arguments</span> | <span
                                    class="blue_link" ng-click="app.activeCommentSection = 'socialMentions'; app.scrollToAnchor('socialMentions')" translate="VIEWS.TOPICS_TOPICID.LNK_MENTIONS_COUNT"
                                    translate-values="{mentionsCount: (topicSocialMentions.length ||0)}">0 social mentions</span> <span ng-if="!topic.hashtag && topic.canEdit()"> | </span><span class="blue_link" ng-if="!topic.hashtag && topic.canEdit()"
                                                                                                                                        ui-sref="topics.view.settings({topicId: topic.id, tab: 'settings'})"
                                                                                                                                        translate="VIEWS.TOPICS_TOPICID.LNK_MENTIONS_COUNT_ADD_HASHTAG"> add hashtag</span><span
                                    ng-if="topic.hashtag"> #{{topic.hashtag}}</span>
                                </div>
                            </div>

                            <div class="line lightest_line"></div>
                        </div>


                        <div id="topic_content_area" class="topic_content">
                            <iframe cos-etherpad ng-if="topic.canEdit() && app.editMode" frameborder="0" scrolling="no" ng-show="topic.padUrl && !('topics.view.followUp' | isState)"
                                    ng-src="{{topic.padUrl}}" width="100%" height="600"></iframe>
                            <ng-bind-html ng-if="!app.editMode" ng-bind-html="topic.description"></ng-bind-html>
                        </div>

                    </div>

                    <div class="comments_section">
                        <div class="tabs_wrap">
                            <div ng-click="app.activeCommentSection = 'arguments'" class="tab"
                                 ng-class="app.activeCommentSection == 'arguments' || app.activeCommentSection == undefined ? 'active':''">
                                <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.LBL_TAB_ARGUMENTS">Arguments</div>
                            </div>
                            <div ng-click="app.activeCommentSection = 'socialMentions'" class="tab" ng-class="app.activeCommentSection == 'socialMentions' ? 'active':''">
                                <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.LBL_TAB_MENTIONS">Social mentions</div>
                            </div>
                        </div>
                        <div class="clearer"></div>
                        <div class="comments_content">

                            <div ng-if="app.activeCommentSection == 'arguments' || app.activeCommentSection == undefined" class="arguments_container">
                                <div class="arguments_wrap">
                                    <div class="arguments_header">
                                        <div class="number_of_arguments" translate="VIEWS.TOPICS_TOPICID.TAB_ARGUMENTS_HEADING" translate-values="{count: topicComments.rows.length}">0 arguments</div>
                                        <div class="arguments_data">
                                            <div class="data_left">
                                                <span class="data_item" translate="VIEWS.TOPICS_TOPICID.LBL_ARGUMENTS_COUNT_PRO" translate-values="{countPro:topicComments.count.pro}">pro: 0</span>
                                                <span class="data_item" translate="VIEWS.TOPICS_TOPICID.LBL_ARGUMENTS_COUNT_CON" translate-values="{countCon:topicComments.count.con}">con: 0</span>
                                            </div>
                                            <div class="data_right">
                                                <div cos-dropdown class="classic_dropdown borderless_dropdown">

                                                    <div class="dropdown_selection">
                                                        <div class="dropdown_text data_item">
                                                            {{'VIEWS.TOPICS_TOPICID.TXT_COMMENT_ORDER_BY_' + topicComments.orderBy | uppercase | translate}}
                                                        </div>

                                                        <div class="arrow_holder">
                                                            <div class="table_cell">
                                                                <div class="sprite sprite-dropdown-arrowdown-small2x"></div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="dropdown">
                                                        <!-- NO CATEGORY -->
                                                        <div class="dropdown_item" ng-repeat="(orderOption, key) in topicComments.orderByOptions">
                                                            <div class="item_name" ng-click="orderComments(key)">
                                                                {{'VIEWS.TOPICS_TOPICID.TXT_COMMENT_ORDER_BY_' + key | uppercase | translate}}
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                                <div class="blue_button" ng-click="(app.user.loggedIn && app.scrollToAnchor('post_argument_wrap')) || !app.user.loggedIn && app.doShowLogin()" translate="VIEWS.TOPICS_TOPICID.BTN_ADD_ARGUMENT">Add argument</div>

                                            </div>
                                        </div>
                                        <div class="clearer"></div>

                                        <div class="line lightest_line"></div>
                                    </div>

                                    <div class="arguments_content" id="arguments" ng-if="topicComments.rows.length">

                                        <!-- FIRST COMMENT -->
                                        <div class="argument_wrap" ng-class="{is_con:comment.type=='con'}" ng-repeat="comment in topicComments.rows | orderBy: topicComments.orderBy">
                                            <div class="single_argument">
                                                <div id="{{comment.id+(comment.edits.length-1)}}" class="argument" ng-class="{edit_argument: comment.showEdit}">
                                                    <!-- COMMENT HEADER -->
                                                    <div class="argument_header">
                                                        <div class="argumentator">
                                                            <div class="table_cell">
                                                                <div cos-dropdown class="classic_dropdown borderless_dropdown">

                                                                    <div class="dropdown_selection">
                                                                        <div class="dropdown_text data_item">
                                                                            {{comment.creator.name}}
                                                                        </div>

                                                                        <div class="arrow_holder" ng-if="comment.creator.email">
                                                                            <div class="table_cell">
                                                                                <div class="sprite sprite-dropdown-arrowdown-small2x"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="dropdown comment_creator_dropdown" ng-if="comment.creator.email">
                                                                        <!-- NO CATEGORY -->
                                                                        <div class="dropdown_item">
                                                                            <div class="item_name">
                                                                                <a ng-href="mailto:{{comment.creator.email}}">{{comment.creator.email}}</a>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div class="argument_header_widget">
                                                            <div class="table_cell">
                                                                {{comment.createdAt | amTimeAgo}}
                                                            </div>
                                                        </div>
                                                        <div ng-if="comment.isEdited()" class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="comment.isEdited()" class="argument_header_widget underline_link" ng-click="comment.showEdits = !comment.showEdits">
                                                            <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_LNK_VIEW_PREVIOUS_VERSIONS">
                                                                View previous versions
                                                            </div>
                                                        </div>
                                                        <div class="line_wrap" ng-if="comment.canEdit()">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="comment.canEdit()" class="argument_header_widget underline_link">
                                                            <div class="table_cell" ng-click="commentEditMode(comment)" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_LNK_EDIT">
                                                                Edit
                                                            </div>
                                                        </div>
                                                        <div class="line_wrap" ng-if="comment.canDelete()">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="comment.canDelete()" class="argument_header_widget underline_link" ng-click="doShowDeleteComment(comment)">
                                                            <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_LNK_DELETE">
                                                                Delete
                                                            </div>
                                                        </div>
                                                        <div class="clearer"></div>
                                                    </div>
                                                    <!-- END COMMENT HEADER -->
                                                    <!-- EDIT COMMENT -->
                                                    <div class="argument_edit_wrap" ng-if="comment.showEdit">
                                                        <input ng-if="comment.showEdit" translate translate-attr-placeholder="VIEWS.TOPICS_TOPICID.PLACEHOLDER_EDIT_ARGUMENT_SUBJECT" ng-model="comment.editSubject" class="gray_borders">

                                                        <textarea ng-if="comment.showEdit" translate translate-attr-placeholder="VIEWS.TOPICS_TOPICID.PLACEHOLDER_EDIT_ARGUMENT_TEXT" class="gray_borders" placeholder="Edit your reply here..." ng-model="comment.editText"></textarea>

                                                        <div class="argument_footer_with_buttons" ng-if="comment.showEdit">
                                                            <div class="table_cell">
                                                                <div class="blue_button nature_green_button" ng-click="updateComment(comment, COMMENT_TYPES.pro)">
                                                                    <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_EDIT_BTN_POST_AS_PRO">
                                                                        Post as a pro argument
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="table_cell">
                                                                <div class="blue_button pinky_red_button" ng-click="updateComment(comment, COMMENT_TYPES.con)" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_EDIT_BTN_POST_AS_CON">
                                                                    <div class="table_cell">
                                                                        Post as a con argument
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="table_cell">
                                                                <div class="blue_button blue_white_button" ng-click="commentEditMode(comment)">
                                                                    <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_EDIT_BTN_CANCEL_EDIT">
                                                                        Cancel edit
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- END EDIT COMMENT -->
                                                    <!-- COMMENT CONTENT -->
                                                    <div class="argument_title">
                                                        <span ng-if="comment.isVisible()">{{comment.subject}}</span>
                                                    </div>

                                                    <div class="argument_text_wrap" check-height ng-class="{overheight: offsetHeight > maxTextHeight, read_more: readMore}">
                                                        <div ng-if="comment.isVisible()" class="argument_text" ng-bind-html="comment.text | linky"></div>
                                                        <div ng-if="!comment.isVisible()" class="argument_text italic" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_HAS_BEEN_DELETED_BY" translate-values="{userFullName: comment.deletedBy.name}">This comment has been deleted by {{comment.deletedBy.name}}</div>
                                                        <div class="argument_overlay">
                                                        </div>
                                                        <div class="read_more_link" ng-click="$parent.readMore = !$parent.readMore"
                                                             translate="{{($parent.readMore) ? 'VIEWS.TOPICS_TOPICID.LNK_COMMENT_CLOSE' : 'VIEWS.TOPICS_TOPICID.LNK_COMMENT_READ_MORE'}}">Read more
                                                        </div>
                                                    </div>
                                                    <!-- END COMMENT CONTENT -->
                                                    <!-- COMMENT DELETED -->
                                                     <div class="argument_footer delete_reasons" ng-if="comment.deletedAt">
                                                        <div class="link_wrap">
                                                            <div class="table_cell">
                                                                <div class="blue_link active_red" ng-click="comment.showDeleteReason = !comment.showDeleteReason" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_WHY">
                                                                    Why?
                                                                </div>
                                                                <div class="active_red_triangle_wrap" ng-if="comment.showDeleteReason">
                                                                    <div class="active_red_triangle">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div class="link_wrap">
                                                            <div class="table_cell">
                                                                <div class="blue_link active_red" ng-click="comment.showDeletedComment = !comment.showDeletedComment" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_VIEW_COMMENT_ANYWAY">
                                                                    View comment anyway
                                                                </div>
                                                                <div class="active_red_triangle_wrap" ng-if="comment.isVisible() && !comment.showDeleteReason">
                                                                    <div class="active_red_triangle">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="clearer"></div>
                                                    </div>

                                                    <div class="alert_argument" ng-if="comment.showDeleteReason" ng-click="comment.showDeleteReason = !comment.showDeleteReason">
                                                        <span translate="VIEWS.TOPICS_TOPICID.ARGUMENT_FOUND_INAPPRIOPRIATE_BY" translate-values="{userFullName: comment.deletedBy.name}">This comment was found inappriopriate by <b>{{comment.deletedBy.name}}</b></span><span ng-if="comment.deletedReasonType || comment.deleteReasonText">:</span>
                                                        <b ng-if="comment.deletedReasonType">{{('TXT_REPORT_TYPES_' + comment.deletedReasonType | uppercase) | translate}}</b><br>
                                                        <b ng-if="comment.deletedReasonText" class="italic">{{comment.deletedReasonText}}</b>
                                                        <br>
                                                        <br>
                                                        <span translate="VIEWS.TOPICS_TOPICID.ARGUMENT_READ_CODE_OF_CONDUCT">Read our <a class="underlined_link" href="">code of conduct</a> for more information</span>
                                                    </div>
                                                    <div class="alert_argument" ng-if="comment.deletedAt && comment.isVisible()">
                                                        <span class="replys_reply italic"><b>{{comment.subject}}</b></span><br>
                                                        <span class="italic" ng-click="comment.showDeletedComment = !comment.showDeletedComment" ng-bind-html="comment.text | linky">{{comment.text}}</span>
                                                    </div>
                                                    <!-- END COMMENT DELETED-->
                                                    <!-- COMMENT EDITS -->
                                                    <div id="{{comment.id+version}}" class="argument" ng-class="{is_con:edit.type=='con', is_pro: edit.type=='pro'}" ng-if="comment.showEdits && comment.isEdited() && !$last" ng-repeat="(version, edit) in comment.edits">
                                                        <div class="argument_header">{{edit.createdAt | amDateFormat : 'L LT'}}</div>
                                                        <div class="argument_text_wrap">
                                                            <div class="argument_text italic" ng-bind-html="edit.text | linky"></div>
                                                        </div>
                                                    </div>
                                                    <!-- END COMMENT EDITS -->
                                                    <!-- COMMENT FOOTER -->
                                                    <div class="argument_footer">
                                                        <div class="link_wrap">
                                                            <div class="table_cell">
                                                                <div class="blue_link black_text" ng-click="comment.showReply=!comment.showReply" translate="VIEWS.TOPICS_TOPICID.LNK_COMMENT_REPLY">
                                                                    Reply
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div class="thumbs_up" ng-click="doCommentVote(comment.id, 1)">
                                                            <div class="table_cell">
                                                                <div class="sprite sprite-icon-thumbsup-hover2x">
                                                                </div>
                                                            </div>
                                                            <div class="table_cell">
                                                                {{comment.votes.up.count}}
                                                            </div>
                                                        </div>
                                                        <div class="thumbs_down" ng-click="doCommentVote(comment.id, -1)">
                                                            <div class="table_cell">
                                                                <div class="sprite sprite-icon-thumbsdown-hover2x">
                                                                </div>
                                                            </div>
                                                            <div class="table_cell">
                                                                {{comment.votes.down.count}}
                                                            </div>
                                                        </div>
                                                        <div class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div class="exclamation" ng-click="doCommentReport(comment)">
                                                            <div class="table_cell">
                                                                <div class="sprite mobile_fix sprite-icon-reportmessage-default2x">
                                                                </div>
                                                                <div class="sprite desktop_fix sprite-icon-reportmessage-default2x">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="comment.isEdited()" class="line_wrap last_edited_line">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="comment.isEdited()" class="argument_footer_widget">
                                                            <div class="table_cell italic" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_LAST_EDITED" translate-values="{edittime: (comment.edits[(comment.edits.length-1)].createdAt | amTimeAgo)}">
                                                                Last edited {{comment.edits[(comment.edits.length-1)].createdAt | amTimeAgo}}
                                                            </div>
                                                        </div>
                                                        <div class="clearer"></div>
                                                    </div>
                                                    <!-- END COMMENT FOOTER -->
                                                </div>

                                                <!-- REPLY TO COMMENT  -->
                                                <div class="post_argument_wrap" ng-if="comment.showReply" ng-controller="TopicCommentCreateFormCtrl">
                                                    <textarea id="argument_con_reply_text" ng-model="form.text" class="gray_borders" ng-class="{'error_input': form.errors.text}"
                                                              placeholder="{{'VIEWS.TOPICS_TOPICID.PLACEHOLDER_WRITE_REPLY_HERE' | translate}}"></textarea>
                                                    <label for="argument_con_reply_text" class="error_label" ng-if="form.errors.text">
                                                        <div class="table_cell">
                                                            <div class="sprite sprite-icon-inputfield-error2x"></div>
                                                            <span translate="{{form.errors.text}}"></span>
                                                        </div>
                                                    </label>
                                                    <div class="blue_button" cos-disabled="!form.text" ng-click="submitReply(comment.id, (comment.edits.length-1))" translate="VIEWS.TOPICS_TOPICID.BTN_COMMENT_POST_REPLY">Post
                                                        reply
                                                    </div>
                                                    <div class="clearer"></div>
                                                </div>
                                                <!-- END REPLY TO COMMENT -->
                                            </div>

                                            <!-- COMMENT REPLY -->
                                            <div class="single_argument is_reply" ng-if="comment.replies.rows.length" ng-repeat="reply in comment.replies.rows" ng-click="">
                                                <div  id="{{reply.id+(reply.edits.length-1)}}" class="argument" ng-class="{edit_argument: reply.showEdit}">
                                                    <!-- REPLY HEADER -->
                                                    <div class="argument_header">
                                                        <div class="reply_icon sprite sprite-icon-arrow-reply2x">
                                                        </div>
                                                        <div class="argumentator">
                                                            <div class="table_cell">
                                                                <div cos-dropdown class="classic_dropdown borderless_dropdown">

                                                                    <div class="dropdown_selection">
                                                                        <div class="dropdown_text data_item">
                                                                            {{reply.creator.name}}
                                                                        </div>

                                                                        <div class="arrow_holder" ng-if="reply.creator.email">
                                                                            <div class="table_cell">
                                                                                <div class="sprite sprite-dropdown-arrowdown-small2x"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="dropdown comment_creator_dropdown" ng-if="comment.creator.email">
                                                                        <!-- NO CATEGORY -->
                                                                        <div class="dropdown_item">
                                                                            <div class="item_name">
                                                                                <a ng-href="mailto:{{comment.creator.email}}">{{reply.creator.email}}</a>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div class="argument_header_widget">
                                                            <div class="table_cell">
                                                                {{reply.createdAt | amTimeAgo}}
                                                            </div>
                                                        </div>
                                                        <div ng-if="reply.isEdited()" class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="reply.isEdited()" class="argument_header_widget underline_link" ng-click="reply.showEdits = !reply.showEdits">
                                                            <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_LNK_VIEW_PREVIOUS_VERSIONS">
                                                                View previous versions
                                                            </div>
                                                        </div>
                                                        <div ng-if="reply.canEdit()" class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="reply.canEdit()" class="argument_header_widget underline_link">
                                                            <div class="table_cell" ng-click="commentEditMode(reply)" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_LNK_EDIT">
                                                                Edit
                                                            </div>
                                                        </div>
                                                        <div ng-if="reply.canDelete()" class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="reply.canDelete()" class="argument_header_widget underline_link" ng-click="doShowDeleteComment(reply)">
                                                            <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_LNK_DELETE">
                                                                Delete
                                                            </div>
                                                        </div>
                                                        <div class="clearer"></div>
                                                    </div>
                                                    <!-- END REPLY HEADER -->
                                                    <!-- REPLY EDIT-->
                                                    <div class="argument_edit_wrap" ng-if="reply.showEdit">
                                                        <textarea class="gray_borders" translate translate-attr-placeholder="VIEWS.TOPICS_TOPICID.PLACEHOLDER_EDIT_REPLY" placeholder="Edit your reply here..." ng-model="reply.editText"></textarea>

                                                        <div ng-if="reply.showEdit" class="argument_footer_with_buttons">
                                                            <div class="table_cell">
                                                                <div class="blue_button" ng-click="updateComment(reply)">
                                                                    <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_BTN_SAVE_EDIT_REPLY">
                                                                        Save
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="table_cell">
                                                                <div class="blue_button blue_white_button" ng-click="commentEditMode(reply)">
                                                                    <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_BTN_CANCEL_EDIT_REPLY">
                                                                        Cancel
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!--END REPLY EDIT-->
                                                    <!-- REPLY EDITS -->
                                                    <div id="{{reply.id+(version-1)}}" class="argument" ng-if="reply.showEdits && reply.isEdited() && !$last" ng-repeat="(version, edit) in reply.edits">
                                                        <div class="argument_header">{{edit.createdAt | amDateFormat : 'L LT'}}</div>
                                                        <div class="argument_text_wrap">
                                                            <div class="argument_text italic" ng-bind-html="edit.text | linky"></div>
                                                        </div>
                                                    </div>
                                                    <!-- END REPLY EDITS -->
                                                    <div class="argument_text_wrap" ng-class="{overheight:offsetHeight > maxTextHeight, read_more: readMore}" check-height>
                                                        <div ng-if="!reply.deletedAt && reply.isVisible()" class="argument_text"><span class="replys_reply" ng-click="goToParentComment(comment, reply.parent)">@{{getParentAuthor(comment, reply.parent.id)}}</span></div>
                                                        <div ng-if="!reply.deletedAt && reply.isVisible()" class="argument_text" ng-bind-html="reply.text | linky"></div>
                                                        <div ng-if="!reply.isVisible()" class="argument_text italic" >This comment has been deleted by {{reply.deletedBy.name}}</div>
                                                        <div class="argument_overlay">
                                                        </div>
                                                        <div class="read_more_link " ng-click="$parent.readMore = !$parent.readMore"
                                                             translate="{{($parent.readMore) ? 'VIEWS.TOPICS_TOPICID.LNK_COMMENT_REPLY_CLOSE' : 'VIEWS.TOPICS_TOPICID.LNK_COMMENT_REPLY_READ_MORE'}}">
                                                            Read more
                                                        </div>
                                                    </div>
                                                    <!-- REPLY DELETED -->
                                                    <div class="argument_footer delete_reasons" ng-if="reply.deletedAt">
                                                        <div class="link_wrap">
                                                            <div class="table_cell">
                                                                <div class="blue_link active_red" ng-click="reply.showDeleteReason = !reply.showDeleteReason" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_WHY">
                                                                    Why?
                                                                </div>
                                                                <div class="active_red_triangle_wrap" ng-if="reply.showDeleteReason">
                                                                    <div class="active_red_triangle">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div class="link_wrap">
                                                            <div class="table_cell">
                                                                <div class="blue_link active_red" ng-click="reply.showDeletedComment = !reply.showDeletedComment" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_VIEW_COMMENT_ANYWAY">
                                                                    View comment anyway
                                                                </div>
                                                                <div class="active_red_triangle_wrap" ng-if="reply.isVisible() && !reply.showDeleteReason">
                                                                    <div class="active_red_triangle">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="clearer"></div>
                                                    </div>

                                                    <div class="alert_argument" ng-if="reply.showDeleteReason" ng-click="reply.showDeleteReason = !reply.showDeleteReason">
                                                        <span translate="VIEWS.TOPICS_TOPICID.ARGUMENT_REPLY_FOUND_INAPPRIOPRIATE_BY" translate-values="{userFullName: reply.deletedBy.name}">This comment was found inappriopriate by <b>{{reply.deletedBy.name}}</b></span><span ng-if="reply.deletedReasonType || reply.deletedReasonText">:</span>
                                                        <b ng-if="reply.deletedReasonType">{{('TXT_REPORT_TYPES_' + reply.deletedReasonType | uppercase) | translate}}</b><br>
                                                        <b class="italic" ng-if="reply.deletedReasonText">{{reply.deletedReasonText}}</b><br>
                                                        <br>
                                                        <br>
                                                        <span translate="VIEWS.TOPICS_TOPICID.ARGUMENT_READ_CODE_OF_CONDUCT">Read our <a class="underlined_link" href="">code of conduct</a> for more information</span>
                                                    </div>
                                                    <div class="alert_argument" ng-if="reply.deletedAt && reply.isVisible()">
                                                        <span class="replys_reply" ng-click="goToParentComment(comment, reply.parent)">@{{getParentAuthor(comment, reply.parent.id)}}</span>
                                                        <span class="italic" ng-click="reply.showDeletedComment = !reply.showDeletedComment">{{reply.text}}</span>
                                                    </div>
                                                    <!-- END REPLY DELETED -->
                                                    <!-- REPLY FOOTER -->
                                                    <div class="argument_footer">
                                                        <div class="link_wrap">
                                                            <div class="table_cell">
                                                                <div class="blue_link black_text" ng-click="reply.showReply = !reply.showReply"
                                                                     translate="VIEWS.TOPICS_TOPICID.LNK_COMMENT_REPLY_REPLY">Reply
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div class="thumbs_up" ng-click="doCommentVote(reply.id, 1)">
                                                            <div class="table_cell">
                                                                <div class="sprite sprite-icon-thumbsup-hover2x">
                                                                </div>
                                                            </div>
                                                            <div class="table_cell">
                                                                {{reply.votes.up.count}}
                                                            </div>
                                                        </div>
                                                        <div class="thumbs_down" ng-click="doCommentVote(reply.id, -1)">
                                                            <div class="table_cell">
                                                                <div class="sprite sprite-icon-thumbsdown-hover2x">
                                                                </div>
                                                            </div>
                                                            <div class="table_cell">
                                                                {{reply.votes.down.count}}
                                                            </div>
                                                        </div>
                                                        <div class="line_wrap">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div class="exclamation"  ng-click="doCommentReport(reply)">
                                                            <div class="table_cell">
                                                                <div class="sprite mobile_fix sprite-icon-reportmessage-default2x">
                                                                </div>
                                                                <div class="sprite desktop_fix sprite-icon-reportmessage-default2x">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="reply.isEdited()" class="line_wrap last_edited_line">
                                                            <div class="table_cell">
                                                                <div class="v_line"></div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="reply.isEdited()" class="argument_footer_widget">
                                                            <div class="table_cell italic" translate="VIEWS.TOPICS_TOPICID.ARGUMENT_LAST_EDITED" translate-values="{edittime: (reply.edits[(reply.edits.length-1)].createdAt | amTimeAgo)}">
                                                                Last edited {{reply.edits[(reply.edits.length-1)].createdAt | amTimeAgo}}
                                                            </div>
                                                        </div>
                                                        <div class="clearer"></div>
                                                    </div>
                                                    <!-- REPLY FOOTER -->
                                                </div>
                                                <!-- REPLY TO REPLY -->
                                                <div class="post_argument_wrap" ng-if="reply.showReply" ng-controller="TopicCommentCreateFormCtrl">
                                                    <form name="argumentReplyForm">
                                                        <textarea id="argument_pro_reply_text" class="gray_borders" ng-model="form.text" ng-class="{'error_input': form.errors.text}"
                                                                  placeholder="{{'VIEWS.TOPICS_TOPICID.PLACEHOLDER_WRITE_REPLY_HERE' | translate}}"
                                                                  required></textarea>
                                                        <label for="argument_pro_reply_text" class="error_label" ng-if="form.errors.text">
                                                            <div class="table_cell">
                                                                <div class="sprite sprite-icon-inputfield-error2x"></div>
                                                                <span translate="{{form.errors.text}}"></span>
                                                            </div>
                                                        </label>
                                                        <div class="blue_button" cos-disabled="argumentReplyForm.$invalid" ng-click="submitReply(reply.id, (reply.edits.length-1))"
                                                             translate="VIEWS.TOPICS_TOPICID.BTN_COMMENT_REPLY_POST_REPLY">
                                                            Post reply
                                                        </div>
                                                        <div class="clearer"></div>
                                                    </form>
                                                </div>
                                                <!-- END REPLY TO REPLY -->
                                            </div>
                                        </div>


                                    </div>

                                    <div id="post_argument_wrap" class="post_argument_wrap" ng-controller="TopicCommentCreateFormCtrl">
                                        <div class="post_argument_overlay" ng-if="!app.user.loggedIn">
                                            <h3 translate-compile translate="VIEWS.TOPICS_TOPICID.LOG_IN_TO_COMMENT">You need to <div class="blue_link">log in </div> to comment</h3>
                                        </div>
                                        <form cos-disabled="!app.user.loggedIn" name="argumentForm">
                                            <div class="line lightest_line" ng-if="topicComments.rows.length"></div>
                                            <input id="argument_subject" ng-model="form.subject" placeholder="{{'VIEWS.TOPICS_TOPICID.PLACEHOLDER_ADD_SUBJECT_TO_ARGUMENT' | translate}}"
                                                   class="gray_borders" ng-class="{'error_input': form.errors.subject}" required>
                                            <label for="argument_subject" class="error_label" ng-if="form.errors.subject">
                                                <div class="table_cell">
                                                    <div class="sprite sprite-icon-inputfield-error2x"></div>
                                                    <span translate="{{form.errors.subject}}"></span>
                                                </div>
                                            </label>
                                            <textarea id="argument_text" ng-model="form.text" class="gray_borders"
                                                      placeholder="{{'VIEWS.TOPICS_TOPICID.PLACEHOLDER_EXPLAIN_YOUR_ARGUMENT' | translate}}" ng-class="{'error_input': form.errors.text}"
                                                      required></textarea>
                                            <label for="argument_text" class="error_label" ng-if="form.errors.text">
                                                <div class="table_cell">
                                                    <div class="sprite sprite-icon-inputfield-error2x"></div>
                                                    <span translate="{{form.errors.text}}"></span>
                                                </div>
                                            </label>
                                            <div class="blue_button nature_green_button" cos-disabled="argumentForm.$invalid" ng-click="submitPro()"
                                                 translate="VIEWS.TOPICS_TOPICID.BTN_COMMENT_POST_AS_PRO">Post as a pro argument
                                            </div>
                                            <div class="blue_button pinky_red_button" cos-disabled="argumentForm.$invalid" ng-click="submitCon()"
                                                 translate="VIEWS.TOPICS_TOPICID.BTN_COMMENT_POST_AS_CON">Post as a con argument
                                            </div>
                                            <div class="clearer"></div>
                                        </form>
                                    </div>

                                </div>

                            </div>

                            <div id="socialMentions" ng-if="app.activeCommentSection == 'socialMentions'" class="social_mentions_container">

                                <div class="social_mentions_header">
                                    <div class="social_mentions_description" translate="VIEWS.TOPICS_TOPICID.TAB_SOCIAL_MENTIONS_HEADING">Social mentions</div>
                                    <div class="social_mentions_hashtag" ng-if="topic.hashtag" ui-sref="topics.view.settings({topicId: topic.id, tab: 'settings'})">
                                        #{{topic.hashtag}}
                                    </div>
                                    <div class="clearer"></div>
                                    <div class="line lightest_line"></div>
                                </div>

                                <div class="social_mentions_wrap">
                                    <div class="social_mentions_message_info" ng-if="!topic.hashtag">
                                        <span translate="VIEWS.TOPICS_TOPICID.TAB_SOCIAL_METIONS_TXT_NO_HASHTAG_DEFINED">Sorry, we cannot show you the social mentions as there is no hashtag defined for this Topic. Users with editor permissions can add the hashtag to fetch social mentions.</span>
                                        <div ng-if="topic.canEdit()" class="blue_button" ui-sref="topics.view.settings({topicId: topic.id, tab: 'settings'})"
                                             translate="VIEWS.TOPICS_TOPICID.TAB_SOCIAL_MENTIONS_BTN_ADD_HASHTAG">Add hashtag
                                        </div>
                                    </div>
                                    <div class="social_mentions_message_info" ng-if="topic.hashtag && !topicSocialMentions.length">
                                        <span translate="VIEWS.TOPICS_TOPICID.TAB_SOCIAL_MENTIONS_NO_MENTIONS_FOUND">Sorry, no social mentions found on Twitter for the hashtag</span> <span
                                        ng-class="{blue_link: topic.canEdit()}" ui-sref="topics.view.settings({topicId: topic.id, tab: 'settings'})"/>#{{topic.hashtag}}</span>
                                        <div ng-if="topic.canEdit()" class="blue_button" ui-sref="topics.view.settings({topicId: topic.id, tab: 'settings'})"
                                             translate="VIEWS.TOPICS_TOPICID.TAB_SOCIAL_MENTIONS_BTN_CHANGE_HASHTAG">Change hashtag
                                        </div>
                                    </div>
                                    <div class="social_mention" ng-repeat="mention in topicSocialMentions">
                                        <div class="social_mention_header">
                                            <div class="social_mention_header_section">
                                                <div class="table_cell">
                                                    <img alt="" src=".././imgs/test_topic_logo.png">
                                                </div>
                                            </div>
                                            <div class="social_mention_header_section social_mention_opacity">
                                                <div class="table_cell">
                                                    {{mention.creator.name}}
                                                </div>
                                            </div>
                                            <div class="social_mention_header_section">
                                                <div class="table_cell">
                                                    <div class="v_line"></div>
                                                </div>
                                            </div>
                                            <div class="social_mention_header_section social_mention_opacity">
                                                <div class="table_cell">
                                                    {{mention.createdAt | amDateFormat : 'DD/MM/YYYY HH:mm'}}
                                                </div>
                                            </div>
                                            <div class="clearer mobile_clearer"></div>
                                            <div class="social_channel">
                                                <div class="social_mention_header_section social_mention_icon">
                                                    <div class="table_cell">
                                                        <div class="sprite sprite-icon-social-twitter2x">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="social_mention_header_section social_mention_opacity">
                                                    <div class="table_cell">
                                                        <span translate="VIEWS.TOPICS_TOPICID.TAB_SOCIAL_MENTIONS_POSTED_VIA">Posted via</span><span
                                                        class="social_mention_channel">{{mention.sourceId}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="clearer"></div>
                                        </div>
                                        <div class="social_mention_text" ng-bind-html="mention.text | linky | wrapWithSpan: '#' + topic.hashtag :'blue_link'">
                                        </div>
                                    </div>

                                </div>

                            </div>

                        </div>
                    </div>

                </div>

            </div>

            <div class="side_panel" ng-if="wWidth > 1024 || app.topics_settings">

                <div class="options_wrap">
                    <div class="options_header">
                        <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.NAV_HEADING">OPTIONS</div>
                    </div>
                    <div class="options_content">
                        <div ng-if="!(topic.vote.id && topic.status==STATUSES.voting)" class="blue_link" cos-disabled="!topic.canSendToVote()" ng-click="sendToVote()"
                             translate="VIEWS.TOPICS_TOPICID.NAV_LNK_SEND_TO_VOTE">Send to vote
                        </div>
                        <div ng-if="(topic.vote.id && topic.status==STATUSES.voting)" class="blue_link" cos-disabled="!topic.canSendToFollowUp()" ng-click="sendToFollowUp()"
                             translate="VIEWS.TOPICS_TOPICID.NAV_LNK_SEND_TO_FOLLOW_UP">Send to follow up
                        </div>
                        <div class="blue_link" cos-disabled="!topic.canUpdate()" ng-click="closeTopic()" translate="VIEWS.TOPICS_TOPICID.NAV_LNK_CLOSE_TOPIC">Close topic</div>
                        <div class="line lightest_line"></div>
                        <div class="blue_link" ui-sref="topics.view.settings({topicId: topic.id, tab: 'settings'})" translate="VIEWS.TOPICS_TOPICID.NAV_LNK_SETTINGS">Settings</div>
                        <div class="blue_link" ui-sref="topics.view.settings({topicId: topic.id, tab: 'categories'})" translate="VIEWS.TOPICS_TOPICID.NAV_LNK_CATEGORIES">Categories</div>
                        <div class="blue_link" ui-sref="topics.view.settings({topicId: topic.id, tab: 'invite'})" translate="VIEWS.TOPICS_TOPICID.NAV_LNK_INVITE_USERS">Invite users</div>
                        <div class="blue_link" ui-sref="topics.view.settings({topicId: topic.id, tab: 'share'})" translate="VIEWS.TOPICS_TOPICID.NAV_LNK_SHARE">Share topic</div>
                        <div class="line lightest_line"></div>
                        <div class="blue_link" cos-disabled="!topic.canEdit() || (topic.status !== STATUSES.inProgress)" ng-click="app.dotoggleEditMode()"
                             ng-bind="(app.editMode ? 'View topic' : 'Edit topic')" translate="VIEWS.TOPICS_TOPICID.NAV_LNK_EDIT_TOPIC">Edit topic
                        </div>
                        <div cos-disabled="!topic.canLeave()" class="blue_link" ng-click="doLeaveTopic(topic)" translate="VIEWS.TOPICS_TOPICID.NAV_LNK_LEAVE_TOPIC">Leave topic</div>
                    </div>
                </div>
                <div class="options_wrap">
                    <div class="options_header">
                        <div class="table_cell" translate="VIEWS.TOPICS_TOPICID.HEADER_FILES">FILES</div>
                    </div>
                    <div class="options_content">
                        <div class="blue_link" ng-repeat="attachment in topicAttachments">
                            <a ng-if="attachment.source === ATTACHMENT_SOURCES.upload" class="blue_link" href="{{attachment.link}}" ng-click="downloadAttachment(attachment)">{{attachment.name}} <span class="btn blue_button file_type">.{{attachment.type}}</span></a>
                            <a ng-if="attachment.source !== ATTACHMENT_SOURCES.upload" class="blue_link" href="{{attachment.link}}" >{{attachment.name}} <span class="btn blue_button file_type">{{attachment.type}}</span></a>
                        </div>
                        <div class="line lightest_line" ng-if="topicAttachments.length"></div>
                        <div ui-sref="topics.view.files" cos-disabled="!topic.canEdit()"class="blue_link" translate="VIEWS.TOPICS_TOPICID.LNK_ADD_MANAGE_FILES">Add/manage files</div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="side_panel_background">
    </div>

    <div ui-view></div>
</div>
